import{j as $,H as A,k as S,l as F,m as j,n as k,S as Y,P as O,B as q,f as X,F as J,E as K,a as Q,g as Z,h as ee,G as re,A as ne,W as ae,L as te}from"./three.module-f499bf07.js";import{O as oe}from"./OrbitControls-608f2de0.js";import{B as ie}from"./index-969f7968.js";/* empty css              */class se extends ${constructor(c){super(c),this.type=A}parse(c){const d=function(e,a){switch(e){case 1:console.error("THREE.RGBELoader Read Error: "+(a||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(a||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(a||""));break;default:case 4:console.error("THREE.RGBELoader: Error: "+(a||""))}return-1},v=`
`,H=function(e,a,s){a=a||1024;let i=e.pos,t=-1,r=0,l="",n=String.fromCharCode.apply(null,new Uint16Array(e.subarray(i,i+128)));for(;0>(t=n.indexOf(v))&&r<a&&i<e.byteLength;)l+=n,r+=n.length,i+=128,n+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(i,i+128)));return-1<t?(s!==!1&&(e.pos+=r+t+1),l+n.slice(0,t)):!1},x=function(e){const a=/^#\?(\S+)/,s=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,o=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,i=/^\s*FORMAT=(\S+)\s*$/,t=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,r={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let l,n;if(e.pos>=e.byteLength||!(l=H(e)))return d(1,"no header found");if(!(n=l.match(a)))return d(3,"bad initial token");for(r.valid|=1,r.programtype=n[1],r.string+=l+`
`;l=H(e),l!==!1;){if(r.string+=l+`
`,l.charAt(0)==="#"){r.comments+=l+`
`;continue}if((n=l.match(s))&&(r.gamma=parseFloat(n[1])),(n=l.match(o))&&(r.exposure=parseFloat(n[1])),(n=l.match(i))&&(r.valid|=2,r.format=n[1]),(n=l.match(t))&&(r.valid|=4,r.height=parseInt(n[1],10),r.width=parseInt(n[2],10)),r.valid&2&&r.valid&4)break}return r.valid&2?r.valid&4?r:d(3,"missing image size specifier"):d(3,"missing format specifier")},V=function(e,a,s){const o=a;if(o<8||o>32767||e[0]!==2||e[1]!==2||e[2]&128)return new Uint8Array(e);if(o!==(e[2]<<8|e[3]))return d(3,"wrong scanline width");const i=new Uint8Array(4*a*s);if(!i.length)return d(4,"unable to allocate buffer space");let t=0,r=0;const l=4*o,n=new Uint8Array(4),w=new Uint8Array(l);let T=s;for(;T>0&&r<e.byteLength;){if(r+4>e.byteLength)return d(1);if(n[0]=e[r++],n[1]=e[r++],n[2]=e[r++],n[3]=e[r++],n[0]!=2||n[1]!=2||(n[2]<<8|n[3])!=o)return d(3,"bad rgbe scanline format");let y=0,g;for(;y<l&&r<e.byteLength;){g=e[r++];const m=g>128;if(m&&(g-=128),g===0||y+g>l)return d(3,"bad scanline data");if(m){const _=e[r++];for(let U=0;U<g;U++)w[y++]=_}else w.set(e.subarray(r,r+g),y),y+=g,r+=g}const W=o;for(let m=0;m<W;m++){let _=0;i[t]=w[m+_],_+=o,i[t+1]=w[m+_],_+=o,i[t+2]=w[m+_],_+=o,i[t+3]=w[m+_],t+=4}T--}return i},z=function(e,a,s,o){const i=e[a+3],t=Math.pow(2,i-128)/255;s[o+0]=e[a+0]*t,s[o+1]=e[a+1]*t,s[o+2]=e[a+2]*t,s[o+3]=1},C=function(e,a,s,o){const i=e[a+3],t=Math.pow(2,i-128)/255;s[o+0]=F.toHalfFloat(Math.min(e[a+0]*t,65504)),s[o+1]=F.toHalfFloat(Math.min(e[a+1]*t,65504)),s[o+2]=F.toHalfFloat(Math.min(e[a+2]*t,65504)),s[o+3]=F.toHalfFloat(1)},u=new Uint8Array(c);u.pos=0;const R=x(u);if(R!==-1){const e=R.width,a=R.height,s=V(u.subarray(u.pos),e,a);if(s!==-1){let o,i,t;switch(this.type){case S:t=s.length/4;const r=new Float32Array(t*4);for(let n=0;n<t;n++)z(s,n*4,r,n*4);o=r,i=S;break;case A:t=s.length/4;const l=new Uint16Array(t*4);for(let n=0;n<t;n++)C(s,n*4,l,n*4);o=l,i=A;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type);break}return{width:e,height:a,data:o,header:R.string,gamma:R.gamma,exposure:R.exposure,type:i}}}return null}setDataType(c){return this.type=c,this}load(c,b,M,I){function f(p,d){switch(p.type){case S:case A:p.encoding=j,p.minFilter=k,p.magFilter=k,p.generateMipmaps=!1,p.flipY=!0;break}b&&b(p,d)}return super.load(c,f,M,I)}}const E=new Y,G=new O(75,window.innerWidth/window.innerHeight,.1,1e3);G.position.set(2,1,2);const B=new te;B.onStart=()=>{console.log("Started loading files.")};B.onProgress=(h,c,b)=>{console.log(`Url：${h}`),console.log(`Progress：${c} / ${b}.`)};B.onLoad=()=>{console.log("ALL Loaded")};B.onError=h=>{console.log("There was an error loading "+h)};const le=new q(1,1,1,200,200,200),de=new X({metalness:.8,roughness:.05,side:J});new se(B).loadAsync(`${ie}images/textures/hdr/002.hdr`).then(h=>{h.mapping=K,E.background=h,E.environment=h});const ce=new Q(le,de);E.add(ce);const ge=new Z(16777215,.5);E.add(ge);const D=new ee(16777215);D.position.set(5,5,5);E.add(D);const me=new re(10,10),_e=new ne(5);E.add(me);E.add(_e);const L=new ae;L.setSize(window.innerWidth,window.innerHeight);document.body.appendChild(L.domElement);const N=new oe(G,L.domElement);N.enableDamping=!0;window.addEventListener("resize",()=>{G.aspect=window.innerWidth/window.innerHeight,G.updateProjectionMatrix(),L.setSize(window.innerWidth,window.innerHeight),L.setPixelRatio(window.devicePixelRatio)});function P(){N.update(),L.render(E,G),requestAnimationFrame(P)}P();
